class LiquidPinBehavior extends LiquidBehavior{static name="liquidPin";static viewModelEvents={"change:computedStyles":"initialize"};static appEvents={"after:windowResize":"afterWindowResize"};options(){return{start:"top top",end:"bottom top",trigger:"self",endTrigger:"self",duration:null,pin:!0,animation:null,horizontal:!1,pinnedContainer:null,pinReparent:null,pinSpacer:null,pinSpacing:!0,pinType:"fixed",onEnter:null,onLeave:null,onEnterBack:null,onLeaveBack:null,onBeforeEnable:null,onAfterEnable:null,onBeforeDisable:null,onAfterDisable:null,ignoreIfTallerThanViewport:!1}}initialize(){const t=this.getOption("onBeforeDisable"),e=this.getOption("onAfterDisable"),i=this.getOption("onBeforeEnable"),n=this.getOption("onAfterEnable");this.sc=ScrollTrigger.create({trigger:this.getTrigger(),endTrigger:this.getEndTrigger(),start:this.getOption("start"),end:this.getEnd(),pin:this.getOption("pin"),animation:this.getOption("animation"),horizontal:this.getOption("horizontal"),pinnedContainer:this.getOption("pinnedContainer"),pinReparent:this.getOption("pinReparent"),pinSpacer:this.getOption("pinSpacer"),pinSpacing:this.getOption("pinSpacing"),pinType:this.getOption("pinType"),onEnter:this.getOption("onEnter"),onLeave:this.getOption("onLeave"),onEnterBack:this.getOption("onEnterBack"),onLeaveBack:this.getOption("onLeaveBack")}),this.isInitialized=!0,t&&t.apply(this,[this.sc]),this.sc?.disable(),e&&e.apply(this,[this.sc]),this.getOption("ignoreIfTallerThanViewport")&&this.view.model.get("rect").height<this.liquidApp.windowSize.height&&(i&&i.apply(this,[this.sc]),this.sc?.enable(),n&&n.apply(this,[this.sc]))}getTrigger(){const t=this.getOption("trigger");let e;switch(t){case"topParent":const i=this.view.model.get("topParentContainer");i&&(e=i.view.el);break;case"pageContent":this.liquidApp.layoutRegions?.liquidPageContent?.el&&(e=this.liquidApp.layoutRegions?.liquidPageContent?.el);break;case"pageFooter":this.liquidApp.layoutRegions?.liquidPageFooter?.el&&(e=this.liquidApp.layoutRegions?.liquidPageFooter?.el);break;case"pinnedElement":typeof this.getOption("pin")=="string"&&(e=this.view.el.querySelector(this.getOption("pin")));break;default:e=this.view.el}return e}getEndTrigger(){const t=this.getOption("endTrigger");let e;switch(t){case"topParent":const i=this.view.model.get("topParentContainer");i&&(e=i.view.el);break;case"pageContent":this.liquidApp.layoutRegions?.liquidPageContent?.el&&(e=this.liquidApp.layoutRegions?.liquidPageContent?.el);break;case"pageFooter":this.liquidApp.layoutRegions?.liquidPageFooter?.el&&(e=this.liquidApp.layoutRegions?.liquidPageFooter?.el);break;case"pinnedElement":typeof this.getOption("pin")=="string"&&(e=this.view.el.querySelector(this.getOption("pin")));break}return e}getDuration(){let t=this.getOption("duration");return t?(t==="parentHeight"&&(t=`${this.view.model.get("parentsCollection").at(0).view.el.offsetHeight-this.view.el.offsetTop}px`),t):0}getEnd(){let t=this.getDuration(),e=this.getOption("end");const i=e.split(" ");return i.length===1?e:(i[0]+=(parseInt(t)>=0?"+":"-")+"="+t,i.join(" "))}afterWindowResize(){const t=this.getOption("onBeforeDisable"),e=this.getOption("onAfterDisable"),i=this.getOption("onBeforeEnable"),n=this.getOption("onAfterEnable");this.getOption("ignoreIfTallerThanViewport")&&this.view.model.get("rect").height>this.liquidApp.windowSize.height?(t&&t.apply(this,[this.sc]),this.sc?.disable(),e&&e.apply(this,[this.sc])):(i&&i.apply(this,[this.sc]),this.sc?.enable(),n&&n.apply(this,[this.sc]))}destroy(){this.sc?.kill(),super.destroy()}}window.liquid?.app?window.liquid?.app?.model?.set("loadedBehaviors",[...window.liquid.app.model.get("loadedBehaviors"),LiquidPinBehavior]):window.liquid?.loadedBehaviors?.push(LiquidPinBehavior);
