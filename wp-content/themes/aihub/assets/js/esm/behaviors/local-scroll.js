"use strict";import f from"./base.js";class u extends f{static name="liquidLocalScroll";static domEvents={"click @links":"onLinkClicked"};options(){return{ease:"power2.inOut",duration:null,offset:null}}get ui(){return{links:"[data-lqd-local-scroll-el]"}}initialize(){super.initialize(),this.watchers=[],this.initWatcher(),typeof elementorFrontend<"u"&&elementorFrontend?.utils?.anchors?.setSettings("selectors.targets",".to-disabled-el-local")}initWatcher(){const e=this.getUI("links");e.forEach((n,r)=>{const i=n.getAttribute("href");if(!i||i==="")return;const l=new URL(i,window.location.href).hash;if(!l)return;const s=document.querySelector(l);if(!s)return;const a=ScrollTrigger.create({trigger:s,start:"top center",end:"bottom center+=10px",onToggle:c=>{c.isActive&&(e.forEach(h=>h.classList.remove("lqd-is-active")),n.classList.add("lqd-is-active"))}});this.watchers.push(a)})}onLinkClicked(e){const r=e.currentTarget?.getAttribute("href");if(!r||r==="")return;const i=new URL(r,window.location.href).hash;if(!i)return;const l=document.querySelector(i);if(!l)return;e.preventDefault(),e.stopPropagation();const s=this.getOption("offset")||this.liquidApp.globalOptions.localScroll?.offset,a=this.getOption("duration")||this.liquidApp.globalOptions.localScroll?.duration||1,c=this.getOption("ease"),h=this.view.model.get("behaviors")?.filter(o=>o.name==="liquidToggle"),d=this.view.model.get("parentsCollection")?.find(o=>o.get("behaviors")?.find(t=>t.name==="liquidToggle"));this.scrollTween=gsap.to(window,{duration:a,ease:c,scrollTo:{y:l,offsetY:s,autoKill:!liquidTouchMM.matches}}),d&&d.get("behaviors")?.filter(t=>t.name==="liquidToggle")?.forEach(t=>{const g=t.getChangeProp();d.set({[g]:[-1]})}),liquidTouchMM.matches&&h?.forEach(o=>{const t=o.getChangeProp();this.view.model.set({[t]:[-1]})})}destroy(){this.scrollTween?.kill(),this.watchers?.forEach(e=>e.kill()),super.destroy()}}window.liquid?.app?window.liquid?.app?.model?.set("loadedBehaviors",[...window.liquid.app.model.get("loadedBehaviors"),u]):window.liquid?.loadedBehaviors?.push(u);export default u;
